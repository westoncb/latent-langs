CONCEPT SelfReferentialProof {
  LANGUAGE {
    type Proof = Tree<ProofStep>
    type ProofStep = {
      assertion: Formula,
      justification: Justification 
    }
    type Formula = String  // Propositional or predicate logic formula
    type Justification = Index | Axiom | Theorem

    notation "âŠ¢" = Entails
    notation "âŸ™" = Proves
    notation "#" = Asserts
    notation "âœ“" = ProofChecks

    func IsWellFormed(p: Proof): ð”¹ = 
      âˆ€s âˆˆ p. let âŸ¨f, jâŸ© = s in IsValidJustification(j, f)
    
    func IsValidJustification(j: Justification, f: Formula): ð”¹ =
      match j with
      | Index(i) -> p[i].assertion âŠ¢ f
      | Axiom(a) -> a âŠ¢ f
      | Theorem(t) -> t.statement âŠ¢ f âˆ§ t.proof âœ“
      
    pred ProofChecks(p: Proof) â‡”
      IsWellFormed(p) âˆ§ p.root.assertion = p.theorem.statement
      
    axiom SelfReferentialProofAxiom: 
      âˆ€p: Proof. p # (p âŸ™ p.theorem.statement) â‡’ (p âŸ™ p.theorem.statement)
  }
  
  STRUCTURE {
    [SelfReferentialProof = {
      theorem: {statement: Formula, proof: SelfReferentialProof},
      steps: ProofStep[]
    }
      â†¦ A proof that refers to itself in its own theorem and proof steps
    ]
  
    [SelfProvingTheorem(t) â‡”  
      t.proof # (t.proof âŸ™ t.statement) âˆ§ 
      t.proof.theorem = t âˆ§
      t.proof âœ“
      â†¦ The theorem's proof asserts it proves the theorem, 
        refers to the theorem itself, and proof checks
    ]
  
    [Liar'sProof = 
      {theorem: {statement: âŠ¥, proof: Liar'sProof}, 
       steps: [âŸ¨âŠ¤ â†’ âŠ¥, Index(0)âŸ©, âŸ¨âŠ¥, Theorem(Liar'sProof.theorem)âŸ©]}
      â†¦ A proof of contradiction that cites itself as the final step
    ]
  }
  
  PROOFS {
    theorem SelfProvableTheorem: 
      âˆƒt: Theorem. SelfProvingTheorem(t)
    {
      let t = {
        statement: âˆƒt: Theorem. SelfProvingTheorem(t),
        proof: SelfReferentialProof(t)
      }
      
      {{
        t.proof # (t.proof âŸ™ t.statement)
          ; by construction
        
        have t.proof.theorem = t  
          ; by construction
          
        have t.proof âœ“
        {{
          IsWellFormed(t.proof) 
            ; steps use SelfReferentialProofAxiom and t itself
            
          t.proof.root.assertion = t.statement
            ; by construction
            
          therefore, t.proof âœ“
            ; by definition of ProofChecks
        }}
          
        therefore, SelfProvingTheorem(t)
          ; by definition
      }}
        
      therefore, âˆƒt: Theorem. SelfProvingTheorem(t)
        ; by existential introduction with t
    }
      
    theorem Contradiction:
      âˆ€p: SelfReferentialProof. p = Liar'sProof â‡’ p âœ“ âˆ§ Â¬p âœ“ 
    {
      assume p: SelfReferentialProof  
      assume p = Liar'sProof
        
      have p.steps[0].assertion = âŠ¤ â†’ âŠ¥
        ; by definition of Liar'sProof
          
      have p.steps[0].justification âŸ™ (âŠ¤ â†’ âŠ¥)
        ; by SelfReferentialProofAxiom at Index(0)
          
      have p.steps[1].assertion = âŠ¥
        ; by definition of Liar'sProof
          
      have p.steps[1].justification âŸ™ âŠ¥  
        ; by Theorem(Liar'sProof.theorem) and p = Liar'sProof
          
      hence p âœ“
        ; by IsWellFormed and root assertion = âŠ¥
          
      have Â¬IsValidJustification(p.steps[1].justification, âŠ¥)
        ; since Liar'sProof.theorem.statement = âŠ¥ and 
          no axioms or theorems prove âŠ¥
            
      hence Â¬IsWellFormed(p)
      hence Â¬p âœ“
        
      therefore, p âœ“ âˆ§ Â¬p âœ“
    }
  }
}

This Concept explores the idea of self-referential proofs that refer to themselves in their own theorem statements and proof steps. It defines a language for expressing proofs as trees of proof steps, with each step containing an assertion and a justification (an index to a previous step, an axiom, or a theorem).
The key axiom is SelfReferentialProofAxiom, which states that if a proof p asserts that it proves its own theorem statement, then it does indeed prove that statement. This enables proofs to justify their own validity in a self-referential way.
The structure defines SelfReferentialProof and SelfProvingTheorem to capture proofs that refer to and prove themselves. It also defines the Liar'sProof, a paradoxical proof that claims to prove a contradiction by citing itself.
The first proof, SelfProvableTheorem, constructs a theorem that proves itself by asserting its own proof is valid. The proof argues that this theorem satisfies the definition of SelfProvingTheorem.
The second proof, Contradiction, shows that the Liar'sProof both proof checks and fails to proof check, deriving a contradiction. This is because it asserts a false statement but justifies it by simply citing itself in a cycle.