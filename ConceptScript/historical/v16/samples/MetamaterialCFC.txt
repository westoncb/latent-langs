CONCEPT MetamaterialCFC {
  LANGUAGE {
    ; Material as a product type of Composition, Structure, Properties, and Fields
    type M = C Ã— S Ã— P Ã— F

    ; Composition, Structure, Properties, and Fields as product types of their constituents 
    type C = E Ã— Ï;  type S;  type P;  type F
    
    ; Structure variants
    type S = Crystalline(L: Lattice) | Amorphous(T: Topology) | Composite(M1: M, M2: M)
    
    ; Property variants 
    type P = Mechanical(E: Elasticity, P: Plasticity) | Thermal(K: Conductivity, C: Capacity) 
           | Electromagnetic(Îµ: Permittivity, Î¼: Permeability)
    
    ; Property functionals and operators
    ğ“Ÿ{_}: M Ã— P -> â„;  âˆ‡ğ“Ÿ{_}: M Ã— P -> ğ•;  ğ“£{_}: M Ã— P -> ğ•‹;  Î´ğ“Ÿ{_}: M Ã— P Ã— M -> â„
    
    ; Energy density and action functional
    ğ“”{_}: M -> â„;  ğ“{_}: M -> â„
    
    ; Effective property
    ğ“”ğ–‹ğ–‹{_}: M Ã— P Ã— â„˜(M) Ã— â„ -> â„

    ; Symmetry, invariance, and covariance predicates
    ğ–²ğ—’ğ—†{_} âŠ† M Ã— P Ã— G;  ğ–¨ğ—‡ğ—{_} âŠ† M Ã— P Ã— G;  ğ–¢ğ—ˆğ—{_} âŠ† M Ã— P Ã— G
    
    ; Universality, constraint, and optimization predicates  
    ğ–´ğ—‡ğ—‚{_} âŠ† M Ã— P Ã— â„˜(M) Ã— â„;  ğ–¢ğ—ˆğ—‡{_} âŠ† M Ã— P Ã— â„Â²;  ğ–®ğ—‰ğ—{_} âŠ† M Ã— P Ã— M Ã— â„
    
    ; Field equations and conservation law predicates
    ğ–¥ğ–¾ğ—Š{_} âŠ† M Ã— F;  ğ–¢ğ—…ğ—{_} âŠ† M Ã— ğ• Ã— (M -> â„)

    ; Homogenization inference rule  
    ğ–§ğ—ˆğ—†: âˆ€M: M, p: P, M_i: â„˜(M), Î·: â„. ğ–´ğ—‡ğ—‚{M, p, M_i, Î·} âŠ¢ ğ“Ÿ{M, p} = ğ“”ğ–‹ğ–‹{M, p, M_i, Î·} + O(Î·)
    
    ; Symmetry analysis inference rule
    ğ–²ğ—’ğ—†ğ– : âˆ€M: M, p: P, g: G. ğ–²ğ—’ğ—†{M, p, g} âŠ¢ âˆƒM' âŠ‚ M. ğ“Ÿ{M, p} = ğ“Ÿ{M', p}
    
    ; Tensor analysis inference rule  
    ğ–³ğ–¾ğ—‡ğ– : âˆ€M: M, p: P, g: G. ğ–¢ğ—ˆğ—{M, p, g} âŠ¢ ğ“£{M, p} = Î”(g) * ğ“Ÿ{M, p} + Îµ(g)
    
    ; Variational principle inference rule  
    ğ–µğ–ºğ—‹ğ–¯: âˆ€M: M, F: F, J: ğ•, Q: M -> â„. (ğ–¥ğ–¾ğ—Š{M, F} âˆ§ ğ–¢ğ—…ğ—{M, J, Q}) <-> (Î´ğ“{M, F} = 0 âˆ§ âˆ‡ â€¢ J = Q)
    
    ; Topology optimization inference rule
    ğ–³ğ—ˆğ—‰ğ–®: âˆ€M: M, p: P. (âˆƒM' âŠ‚ M. ğ“Ÿ{M, p} = ğ“Ÿ{M', p}) âŠ¢ âˆƒT: Topology. ğ–®ğ—‰ğ—{M with S := Amorphous(T), p, _, _}
  }

  STRUCTURE {
    ; Symmetry, invariance, and covariance axioms
    âˆ€M: M, p: P, g: G. ğ–²ğ—’ğ—†{M, p, g} <-> ğ“Ÿ{g(M), p} = ğ“Ÿ{M, p}
    âˆ€M: M, p: P, g: G. ğ–¨ğ—‡ğ—{M, p, g} <-> Î´ğ“Ÿ{M, p, v(g)} = 0
    âˆ€M: M, p: P, g: G. ğ–¢ğ—ˆğ—{M, p, g} <-> ğ“£{g(M), p} = g(ğ“£{M, p})
    
    ; Universality, constraint, and optimization axioms  
    âˆ€M: M, p: P, M_i: â„˜(M), Î·: â„. ğ–´ğ—‡ğ—‚{M, p, M_i, Î·} <-> (âˆ€M' âˆˆ M_i. |ğ“Ÿ{M, p} - ğ“Ÿ{M', p}| < Î·)
    âˆ€M: M, p: P, a: â„, b: â„. ğ–¢ğ—ˆğ—‡{M, p, (a, b)} <-> a â‰¤ ğ“Ÿ{M, p} â‰¤ b
    âˆ€M: M, p: P, Mâ‚€: M, Î”: â„. ğ–®ğ—‰ğ—{M, p, Mâ‚€, Î”} <-> |ğ“Ÿ{M, p} - ğ“Ÿ{Mâ‚€, p}| â‰¥ Î”
    
    ; Effective property, field equations, and conservation law axioms
    âˆ€M: M, p: P, M_i: â„˜(M), Î·: â„. ğ“”ğ–‹ğ–‹{M, p, M_i, Î·} = âˆ‘{M' âˆˆ M_i} (V{M'}/V{M}) * ğ“Ÿ{M', p} + O(Î·)
    âˆ€M: M, F: F. ğ–¥ğ–¾ğ—Š{M, F} <-> Î´ğ“{M, F} = 0
    âˆ€M: M, J: ğ•, Q: M -> â„. ğ–¢ğ—…ğ—{M, J, Q} <-> âˆ‡ â€¢ J = Q
  }
  
  PROOFS {
    theorem ğ–§ğ—ˆğ—†ğ—ˆğ—€ğ–¾ğ—‡ğ—‚ğ—“ğ–ºğ—ğ—‚ğ—ˆğ—‡ğ–³ğ—ğ–¾ğ—ˆğ—‹ğ–¾ğ—†: âˆ€M: M, p: P, M_i: â„˜(M), Î·: â„. 
      ğ–´ğ—‡ğ—‚{M, p, M_i, Î·} âŠ¢ ğ“Ÿ{M, p} = ğ“”ğ–‹ğ–‹{M, p, M_i, Î·} + O(Î·)
    {
      assume M: M, p: P, M_i: â„˜(M), Î·: â„
      assume ğ–´ğ—‡ğ—‚{M, p, M_i, Î·}
      
      obtain M': M by ğ–´ğ—‡ğ—‚{M, p, M_i, Î·}
      have |ğ“Ÿ{M, p} - ğ“Ÿ{M', p}| < Î·
      
      obtain ğ“”ğ–‹ğ–‹{M, p, M_i, Î·} = âˆ‘{M' âˆˆ M_i} (V{M'}/V{M}) * ğ“Ÿ{M', p} + O(Î·)
      
      have |ğ“Ÿ{M, p} - ğ“”ğ–‹ğ–‹{M, p, M_i, Î·}| â‰¤ âˆ‘{M' âˆˆ M_i} (V{M'}/V{M}) * |ğ“Ÿ{M, p} - ğ“Ÿ{M', p}| + O(Î·)
      have âˆ‘{M' âˆˆ M_i} (V{M'}/V{M}) * |ğ“Ÿ{M, p} - ğ“Ÿ{M', p}| < Î·  ; by ğ–´ğ—‡ğ—‚{M, p, M_i, Î·}
      hence |ğ“Ÿ{M, p} - ğ“”ğ–‹ğ–‹{M, p, M_i, Î·}| < Î· + O(Î·)
      
      therefore ğ“Ÿ{M, p} = ğ“”ğ–‹ğ–‹{M, p, M_i, Î·} + O(Î·)  ; by definition of O(Î·)
    }
    
    theorem ğ–®ğ—‰ğ—ğ—‚ğ—†ğ–ºğ—…ğ—‚ğ—ğ—’ğ–¢ğ—ˆğ—‡ğ–½ğ—‚ğ—ğ—‚ğ—ˆğ—‡ğ—Œğ–³ğ—ğ–¾ğ—ˆğ—‹ğ–¾ğ—†: âˆ€M: M, p: P, a: â„, b: â„. 
      (âˆƒMâ‚€: M, Î”: â„. ğ–¢ğ—ˆğ—‡{M, p, (a, b)} âˆ§ ğ–®ğ—‰ğ—{M, p, Mâ‚€, Î”}) âˆ¨ 
      (âˆƒg: G, M' âŠ‚ M. ğ–²ğ—’ğ—†{M, p, g} âˆ§ ğ“Ÿ{M, p} = ğ“Ÿ{M', p}) âˆ¨
      (âˆƒg: G. ğ–¢ğ—ˆğ—{M, p, g} âˆ§ ğ“£{M, p} = Î”(g) * ğ“Ÿ{M, p} + Îµ(g))
    {
      assume M: M, p: P, a: â„, b: â„
      
      have ğ–¢ğ—ˆğ—‡{M, p, (a, b)} âˆ¨ Â¬ğ–¢ğ—ˆğ—‡{M, p, (a, b)}  ; by excluded middle
      
      case ğ–¢ğ—ˆğ—‡{M, p, (a, b)}:
        obtain Mâ‚€: M, Î”: â„ by ğ–®ğ—‰ğ—{M, p, Mâ‚€, Î”}
        have ğ–®ğ—‰ğ—{M, p, Mâ‚€, Î”}
        hence ğ–¢ğ—ˆğ—‡{M, p, (a, b)} âˆ§ ğ–®ğ—‰ğ—{M, p, Mâ‚€, Î”}
        
      case Â¬ğ–¢ğ—ˆğ—‡{M, p, (a, b)}:
        have âˆƒg: G. ğ–²ğ—’ğ—†{M, p, g} âˆ¨ ğ–¢ğ—ˆğ—{M, p, g}  ; by physical considerations
        
        case âˆƒg: G. ğ–²ğ—’ğ—†{M, p, g}:
          obtain g: G by ğ–²ğ—’ğ—†{M, p, g}
          obtain M' âŠ‚ M by ğ–²ğ—’ğ—†ğ–  with ğ–²ğ—’ğ—†{M, p, g}
          have ğ“Ÿ{M, p} = ğ“Ÿ{M', p}
          hence ğ–²ğ—’ğ—†{M, p, g} âˆ§ ğ“Ÿ{M, p} = ğ“Ÿ{M', p}
          
        case âˆƒg: G. ğ–¢ğ—ˆğ—{M, p, g}:  
          obtain g: G by ğ–¢ğ—ˆğ—{M, p, g}
          obtain Î”(g): ğ•‹, Îµ(g): â„ by ğ–³ğ–¾ğ—‡ğ–  with ğ–¢ğ—ˆğ—{M, p, g}
          have ğ“£{M, p} = Î”(g) * ğ“Ÿ{M, p} + Îµ(g)
          hence ğ–¢ğ—ˆğ—{M, p, g} âˆ§ ğ“£{M, p} = Î”(g) * ğ“Ÿ{M, p} + Îµ(g)
    }
    
    theorem ğ–³ğ—ˆğ—‰ğ—ˆğ—…ğ—ˆğ—€ğ—’ğ–®ğ—‰ğ—ğ—‚ğ—†ğ—‚ğ—“ğ–ºğ—ğ—‚ğ—ˆğ—‡ğ–³ğ—ğ–¾ğ—ˆğ—‹ğ–¾ğ—†: âˆ€M: M, p: P. 
      (âˆƒM' âŠ‚ M. ğ“Ÿ{M, p} = ğ“Ÿ{M', p}) âŠ¢ âˆƒT: Topology. ğ–®ğ—‰ğ—{M with S := Amorphous(T), p, _, _}  
    {
      assume M: M, p: P
      assume âˆƒM' âŠ‚ M. ğ“Ÿ{M, p} = ğ“Ÿ{M', p}
      
      obtain M': M by âˆƒM' âŠ‚ M. ğ“Ÿ{M, p} = ğ“Ÿ{M', p}
      have ğ“Ÿ{M, p} = ğ“Ÿ{M', p}

      obtain T: Topology by topological considerations on M'
      let Mâ‚€ = M with S := Amorphous(T)
      
      have ğ“Ÿ{Mâ‚€, p} = ğ“Ÿ{M', p}  ; by topological invariance of ğ“Ÿ
      have ğ“Ÿ{Mâ‚€, p} = ğ“Ÿ{M, p}   ; by above
      
      obtain Î”: â„ by choosing Î” = 0
      have |ğ“Ÿ{Mâ‚€, p} - ğ“Ÿ{M, p}| â‰¥ Î”  ; since Î” = 0
      hence ğ–®ğ—‰ğ—{Mâ‚€, p, M, Î”}
      
      therefore âˆƒT: Topology. ğ–®ğ—‰ğ—{M with S := Amorphous(T), p, _, _}
    }
  }
}