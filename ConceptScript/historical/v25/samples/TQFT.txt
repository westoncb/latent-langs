CONCEPT TQFT {
  LANGUAGE {
    TYPE Manifold(n : ‚Ñï)
    TYPE Hilbert  
    TYPE Cobordism(M‚ÇÅ M‚ÇÇ : Manifold(n)) = Manifold(n+1) WITH BoundaryComponents(M‚ÇÅ, M‚ÇÇ)
    TYPE QFT(n : ‚Ñï) = (Manifold(n) -> Hilbert) √ó (Cobordism -> LinearMap)

    FUNC Z(Q : QFT(n), M : Manifold(n)) : Hilbert
    FUNC Z(Q : QFT(n), C : Cobordism) : LinearMap
    FUNC ‚äó : Hilbert √ó Hilbert -> Hilbert  ; Tensor product
    FUNC ‚äî : Manifold(n) √ó Manifold(n) -> Manifold(n)  ; Disjoint union
    FUNC ‚àÖ : Manifold(n)  ; Empty manifold
    
    AXIOM Functoriality {
      ‚àÄ (Q : QFT(n)) (M‚ÇÅ M‚ÇÇ M‚ÇÉ : Manifold(n)) (C‚ÇÅ : Cobordism(M‚ÇÅ, M‚ÇÇ)) (C‚ÇÇ : Cobordism(M‚ÇÇ, M‚ÇÉ)).
        Z(Q, C‚ÇÇ ‚àò C‚ÇÅ) = Z(Q, C‚ÇÇ) ‚àò Z(Q, C‚ÇÅ)
    }

    AXIOM TensorProduct {  
      ‚àÄ (Q : QFT(n)) (M‚ÇÅ M‚ÇÇ : Manifold(n)).
        Z(Q, M‚ÇÅ ‚äî M‚ÇÇ) = Z(Q, M‚ÇÅ) ‚äó Z(Q, M‚ÇÇ)
    }

    AXIOM EmptySet {
      ‚àÄ (Q : QFT(n)).
        Z(Q, ‚àÖ) = C
    }
  }

  STRUCTURE ChernSimonsTQFT(G : LieGroup, k : ‚Ñù) <: QFT(3) {
    DEF S(A : Œ©¬π(P, ùî§)) : ‚Ñù = ‚à´‚à´ Tr(A ‚àß dA + ‚Öî A ‚àß A ‚àß A)
    DEF Z(M : Manifold(3)) : Hilbert = L¬≤(Hom(œÄ‚ÇÅ(M), G) / G)  

    DEF Z(C : Cobordism) : LinearMap = {
      LET (A : Œ©¬π(C, ùî§)) ‚Ü¶ exp(i k S(A))
    }
  }

  PROOFS {
    THEOREM CSFunctoriality {
      STATEMENT: ‚àÄ (G : LieGroup) (k : ‚Ñù). 
        LET Q = ChernSimonsTQFT(G, k) IN
        ‚àÄ (M‚ÇÅ M‚ÇÇ M‚ÇÉ : Manifold(3)) (C‚ÇÅ : Cobordism(M‚ÇÅ, M‚ÇÇ)) (C‚ÇÇ : Cobordism(M‚ÇÇ, M‚ÇÉ)).
          Z(Q, C‚ÇÇ ‚àò C‚ÇÅ) = Z(Q, C‚ÇÇ) ‚àò Z(Q, C‚ÇÅ)
      
      PROOF {
        LET G : LieGroup, k : ‚Ñù, Q = ChernSimonsTQFT(G, k), 
            M‚ÇÅ M‚ÇÇ M‚ÇÉ : Manifold(3), C‚ÇÅ : Cobordism(M‚ÇÅ, M‚ÇÇ), C‚ÇÇ : Cobordism(M‚ÇÇ, M‚ÇÉ)

        Z(Q, C‚ÇÇ ‚àò C‚ÇÅ)
          = ‚à´[DA] exp(i k S(A))  ; Over C‚ÇÇ ‚àò C‚ÇÅ
          = ‚à´[DA‚ÇÇ] ‚à´[DA‚ÇÅ] exp(i k (S(A‚ÇÇ) + S(A‚ÇÅ)))  ; Gluing property of S
          = ‚à´[DA‚ÇÇ] exp(i k S(A‚ÇÇ)) ‚à´[DA‚ÇÅ] exp(i k S(A‚ÇÅ))
          = Z(Q, C‚ÇÇ) ‚àò Z(Q, C‚ÇÅ)  ; Definition of Z on cobordisms
      }
    }

    THEOREM CSMonoidal {
      STATEMENT: ‚àÄ (G : LieGroup) (k : ‚Ñù).
        LET Q = ChernSimonsTQFT(G, k) IN  
        ‚àÄ (M‚ÇÅ M‚ÇÇ : Manifold(3)).
          Z(Q, M‚ÇÅ ‚äî M‚ÇÇ) = Z(Q, M‚ÇÅ) ‚äó Z(Q, M‚ÇÇ)

      PROOF {
        LET G : LieGroup, k : ‚Ñù, Q = ChernSimonsTQFT(G, k),
            M‚ÇÅ M‚ÇÇ : Manifold(3)
        
        Z(Q, M‚ÇÅ ‚äî M‚ÇÇ) 
          = L¬≤(Hom(œÄ‚ÇÅ(M‚ÇÅ ‚äî M‚ÇÇ), G) / G)  ; Definition of Z
          = L¬≤(Hom(œÄ‚ÇÅ(M‚ÇÅ) * œÄ‚ÇÅ(M‚ÇÇ), G) / G)  ; Van Kampen's theorem
          = L¬≤(Hom(œÄ‚ÇÅ(M‚ÇÅ), G) / G) ‚äó L¬≤(Hom(œÄ‚ÇÅ(M‚ÇÇ), G) / G)  ; Product property of Hom
          = Z(Q, M‚ÇÅ) ‚äó Z(Q, M‚ÇÇ)  ; Definition of Z
      }
    }

    THEOREM CSInvolution {
      STATEMENT: ‚àÄ (G : LieGroup) (k : ‚Ñù) (M : Manifold(3)).
        LET Q = ChernSimonsTQFT(G, k), C = Cylinder(M) IN
        Z(Q, C) = id[Z(Q,M)]

      PROOF {
        LET G : LieGroup, k : ‚Ñù, Q = ChernSimonsTQFT(G, k),
            M : Manifold(3), C = Cylinder(M)
        
        Z(Q, C) 
          = ‚à´[DA] exp(i k S(A))  ; Over C
          = ‚à´[DA] exp(0)  ; Since S(A) = 0 on cylinder
          = Vol(Œ©¬π(C, ùî§))  ; Integral over all connections
          = id[L¬≤(Hom(œÄ‚ÇÅ(M), G) / G)]  ; Since C deformation retracts to M 
          = id[Z(Q,M)]  ; Definition of Z
      }
    }
  }
}